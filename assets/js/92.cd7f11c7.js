(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{447:function(s,a,t){"use strict";t.r(a);var n=t(42),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"在centos7中安装mysql8-0-22"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在centos7中安装mysql8-0-22"}},[s._v("#")]),s._v(" 在Centos7中安装Mysql8.0.22")]),s._v(" "),t("h2",{attrs:{id:"下载资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载资源"}},[s._v("#")]),s._v(" 下载资源")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址"),t("OutboundLink")],1),s._v(" "),t("img",{attrs:{src:"/images/linux/mysql/mysql-1.png",alt:""}}),s._v(" "),t("img",{attrs:{src:"/images/linux/mysql/mysql-2.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"创建目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建目录"}},[s._v("#")]),s._v(" 创建目录")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 使用root账户\nmkdir /usr/local/mysql\nmkdir /opt/mysql\nmkdir /opt/mysql/data\nmkdir /opt/mysql/tmp\nmkdir /opt/mysql/log\nmkdir /opt/mysql/var\nmkdir /opt/mysql/innodb\nmkdir /opt/mysql/redolog/\nmkdir /opt/mysql/undolog/\nmkdir /etc/mysql\ntouch /etc/my.cnf\n\n# 将配置内容复制到文件 /etc/mysql/my.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("a",{attrs:{href:"/coding/linux/mysql/my.cnf"}},[s._v("my.cnf 配置")])]),s._v(" "),t("h2",{attrs:{id:"添加用户和组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加用户和组"}},[s._v("#")]),s._v(" 添加用户和组")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 使用root账户\ngroupadd mysql\nuseradd -r -g mysql mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 解压到/usr/local/mysql/\ntar -xvf mysql-8.0.22-el7-x86_64.tar.gz -C /usr/local/mysql/\nmv /usr/local/myql/mysql-8.0.22-el7-x86_64/* /usr/local/mysql\nrm -rf /usr/local/myql/mysql-8.0.22-el7-x86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"授权mysql账户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#授权mysql账户"}},[s._v("#")]),s._v(" 授权mysql账户")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("chown -R mysql:mysql /usr/local/mysql\nchown -R mysql:mysql /opt/mysql\nchown mysql:mysql /etc/mysql/my.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"mysql初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql初始化"}},[s._v("#")]),s._v(" mysql初始化")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1. 初始化密码\n/usr/local/mysql/bin/mysqld --user=mysql --initialize --console\n\n# 2.获取密码\nvim /opt/mysql/log/mysql.err\nA temporary password is generated for root@localhost: :ttlDsdLr7So\n\n# 3.启动mysql\n/usr/local/mysql/bin/mysqld --defaults-file=/etc/mysql/my.cnf --user=mysql --skip-grant-tables \n\n# 4.客户端登录\n/usr/local/mysql/bin/mysql mysql -u root -p\n# 密码是 :ttlDsdLr7So （看第2步）\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"授权访问与修改密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#授权访问与修改密码"}},[s._v("#")]),s._v(" 授权访问与修改密码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ALTER USER 'root'@'localhost' IDENTIFIED BY 'Mysql@321';\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'Mysql@321';\nflush privileges;\nupdate user set host = '%' where user ='root';\nflush privileges;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙"}},[s._v("#")]),s._v(" 防火墙")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("firewall-cmd --zone=public --add-port=3306/tcp --permanent\nfirewall-cmd --reload\nfirewall-cmd --list-ports\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开机启动"}},[s._v("#")]),s._v(" 开机启动")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /lib/systemd/system/\ntouch mysqld.service\nvim mysqld.service\n# 写入开机脚本mysqld.service\nsystemctl enable mysqld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("a",{attrs:{href:"/coding/linux/mysql/mysqld.service"}},[s._v("mysqld.service 配置")])])])}),[],!1,null,null,null);a.default=e.exports}}]);