(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{371:function(a,s,t){"use strict";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch的增删改查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的增删改查"}},[a._v("#")]),a._v(" ElasticSearch的增删改查")]),a._v(" "),t("hr"),a._v(" "),t("h2",{attrs:{id:"常用术语"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用术语"}},[a._v("#")]),a._v(" 常用术语")]),a._v(" "),t("p",[t("strong",[a._v("Document")]),a._v(" 文档数据"),t("br"),a._v(" "),t("strong",[a._v("Index")]),a._v(" 索引"),t("br"),a._v(" "),t("strong",[a._v("Type")]),a._v(" 索引中的数据类型"),t("br"),a._v(" "),t("strong",[a._v("Filed")]),a._v(" 字段，文档的属性"),t("br"),a._v(" "),t("strong",[a._v("Query DSL")]),a._v(" 查询语法"),t("br"),a._v("\n下面的操作将在Kibana中操作，Kibana -> Dev Tools")]),a._v(" "),t("h2",{attrs:{id:"增"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增"}},[a._v("#")]),a._v(" 增")]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/elkb/kibana2.png",alt:""}}),t("br"),a._v("\n注意:自7.X起，官方不在推荐使用type(类型)。"),t("a",{attrs:{href:"https://www.elastic.co/cn/blog/moving-from-types-to-typeless-apis-in-elasticsearch-7-0",target:"_blank",rel:"noopener noreferrer"}},[a._v("告别类型"),t("OutboundLink")],1),t("br"),a._v("\n所以当你使用type时出现了上图中红色字警告，警告中也告知了新的语法选择。下面我们使用无类型的官方推荐的语法添加数据。"),t("br"),a._v(" "),t("img",{attrs:{src:"/images/elkb/kibana3.png",alt:""}}),t("br")]),a._v(" "),t("h3",{attrs:{id:"指定id新增或更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定id新增或更新"}},[a._v("#")]),a._v(" 指定ID新增或更新")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('POST /student/_doc/1\n{\n  "name":"lucy",\n  "sex":"woman",\n  "class":2,\n  "phone":"177-7777-7777"\n}\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h3",{attrs:{id:"系统自动生成id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统自动生成id"}},[a._v("#")]),a._v(" 系统自动生成ID")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('POST /student/_doc\n{\n  "name":"lucy",\n  "sex":"woman",\n  "class":2,\n  "phone":"177-7777-7777"\n}\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h3",{attrs:{id:"指定id新增"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定id新增"}},[a._v("#")]),a._v(" 指定ID新增")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('POST /student/_create/1\n{\n  "name":"lucy",\n  "sex":"woman",\n  "class":2,\n  "phone":"177-7777-7777"\n}\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h2",{attrs:{id:"查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查"}},[a._v("#")]),a._v(" 查")]),a._v(" "),t("h3",{attrs:{id:"query-string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-string"}},[a._v("#")]),a._v(" Query String")]),a._v(" "),t("p",[a._v("String请求是把参数拼接在URL上，然后发起请求。\n"),t("img",{attrs:{src:"/images/elkb/kibana4.png",alt:""}}),t("br")]),a._v(" "),t("h3",{attrs:{id:"query-dsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-dsl"}},[a._v("#")]),a._v(" Query DSL")]),a._v(" "),t("p",[a._v("DSL请求是把参数放进JSON数据格式中，然后整体放在Body中去发起请求。\n"),t("img",{attrs:{src:"/images/elkb/kibana5.png",alt:""}}),t("br")]),a._v(" "),t("h2",{attrs:{id:"改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改"}},[a._v("#")]),a._v(" 改")]),a._v(" "),t("p",[a._v('我们把第二条数据，"name"属性的值变成"rose"。\n'),t("img",{attrs:{src:"/images/elkb/kibana6.png",alt:""}}),t("br")]),a._v(" "),t("h2",{attrs:{id:"删"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删"}},[a._v("#")]),a._v(" 删")]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/elkb/kibana7.png",alt:""}}),t("br")]),a._v(" "),t("h2",{attrs:{id:"elasticsearch-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-sql"}},[a._v("#")]),a._v(" Elasticsearch SQL")]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/elkb/kibana8.png",alt:""}}),t("br")]),a._v(" "),t("h2",{attrs:{id:"更多语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更多语法"}},[a._v("#")]),a._v(" 更多语法")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("增删改查API文档"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-syntax-select.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Elasticsearch-SQL语法"),t("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);