(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{373:function(s,a,n){"use strict";n.r(a);var t=n(42),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"centos7环境安装elasticsearch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7环境安装elasticsearch"}},[s._v("#")]),s._v(" Centos7环境安装ElasticSearch")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"下载最新安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载最新安装包"}},[s._v("#")]),s._v(" 下载最新安装包")]),s._v(" "),n("p",[n("img",{attrs:{src:"/images/elkb/search0.png",alt:""}}),n("br"),s._v("\n官网最新7.5.0(测试版)，官方也不建议我们在生产环境中使用它。不过我们是自己学习就不比担心。"),n("br"),s._v("\n我这里下载的是7.5.0版本，后续其他组件也是7.5.0版本。"),n("br"),s._v(" "),n("a",{attrs:{href:"https://elasticsearch.cn/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("推荐下载地址"),n("OutboundLink")],1),s._v(" "),n("br"),s._v("\n国内推荐复制下载链接到迅雷下，速度还挺快的。")]),s._v(" "),n("h2",{attrs:{id:"安装步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),n("h3",{attrs:{id:"使用rz命令上传包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用rz命令上传包"}},[s._v("#")]),s._v(" 使用RZ命令上传包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@host114 ~]# ls tool/\nelasticsearch-7.5.0-linux-x86_64.tar.gz\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"解压到-usr-local-目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解压到-usr-local-目录"}},[s._v("#")]),s._v(" 解压到/usr/local/目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@host114 ~]# cd /usr/local/elasticsearch-7.5.0/\n[root@host114 elasticsearch-7.5.0]# ll\ntotal 560\ndrwxr-xr-x.  2 david root    4096 Nov 26 09:10 bin\ndrwxr-xr-x.  2 david root     178 Jan 13 18:03 config\ndrwxrwxr-x.  3 david david     19 Jan 13 17:53 data\ndrwxr-xr-x.  9 david root     107 Jan 13 17:38 jdk\ndrwxr-xr-x.  3 david root    4096 Nov 26 09:10 lib\n-rw-r--r--.  1 david root   13675 Nov 26 09:04 LICENSE.txt\ndrwxr-xr-x.  2 david root    4096 Jan 13 17:35 logs\ndrwxr-xr-x. 38 david root    4096 Nov 26 09:10 modules\n-rw-r--r--.  1 david root  523209 Nov 26 09:10 NOTICE.txt\ndrwxr-xr-x.  2 david root       6 Nov 26 09:10 plugins\n-rw-rw-r--.  1 david david   2834 Jan 13 18:03 ?QQwq\n-rw-r--r--.  1 david root    8500 Nov 26 09:04 README.textile\n\n# 注意：7.5.0版本已经携带了自适应的JDK版本。无必要可不比设置自己的JDK。\n启动时出现下面的警告，可负略。\nfuture versions of Elasticsearch will require Java 11; your Java version from [/usr/local/java/jdk1.8.0_231/jre] does not meet this requirement\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"启动elasticsearch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动elasticsearch"}},[s._v("#")]),s._v(" 启动elasticsearch")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 运行elasticsearch\n[david@host114 elasticsearch-7.5.0]$ bin/elasticsearch\n...\n[2020-01-13T17:53:43,135][INFO ][o.e.n.Node               ] [host114] started\n# 看到started 即表示启动成功\n\n# 可能出现的问题一:\n# 此时请切换普通用户操作，如我这里的普通用户david：$ su david \norg.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root\n\n# 可能出现的问题二:\n# 此时请切换回root账户，给elasticsearch-7.5.0目录赋权\n# 如：$ chown david /usr/local/elasticsearch-7.5.0/ -R\nException in thread "main" java.nio.file.AccessDeniedException: /usr/local/elasticsearch-7.5.0/config/jvm.options\n\n# 可能出现的问题三：\n内存问题。我这里设置的elasticsearch-java虚拟机的堆大小固定为1G\n[root@host114 elasticsearch-7.5.0]# config/jvm.options\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h3",{attrs:{id:"暴露给外网访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#暴露给外网访问"}},[s._v("#")]),s._v(" 暴露给外网访问")]),s._v(" "),n("p",[s._v("我是在虚拟机内操作的，如果要使用elasticsearch，需要暴露出来")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 首先关闭防火墙 或者 增加端口白名单，elasticsearch默认访问的端口：9200\n# 我这里关闭防火墙\n$ systemctl stop firewalld\n$ systemctl disable firewalld\n$ service network restart\n\n# 可能出现的问题一：\n[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]\n# 解决方案：\n[root@host114 elasticsearch-7.5.0]# vi /etc/security/limits.conf\n################################################################\n# 增加下面两行配置\n* soft nofile 65536\n* hard nofile 65536\n################################################################\n\n# 可能出现的问题二：\n[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\n# 解决方案：\n[root@host114 elasticsearch-7.5.0]# vi /etc/sysctl.conf \n################################################################\n# 增加下面一行配置\nvm.max_map_count=655360\n################################################################\n$ sysctl -p   使生效\n\n# 可能出现的问题三：\n[3]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured\n# 解决方案：\n[root@host114 elasticsearch-7.5.0]# vi config/elasticsearch.yml \n################################################################\n# 集群命名\ncluster.name: zdw-cluster\n# 节点命名\nnode.name: node-1\n# ip绑定(你当前虚拟机的IP，如果你也是在虚拟机中操作)\nnetwork.host: 192.168.163.114\n# 设置集群节点IP，目前就一台\ndiscovery.seed_hosts: ["192.168.163.114"]\n# 设置初始化master,目前就一台，就设置当前节点名\n# 也可以不设置master,部署集群时，可以由集群间选举产生\ncluster.initial_master_nodes: ["node-1"]\n\n# 其他端口默认就是9200/9300.除非被其他占用，就无须改动\n################################################################\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")])]),n("p",[s._v("上面的问题都没有出现，重启elasticsearch.在浏览器上访问http://192.168.163.114:9200/\n"),n("img",{attrs:{src:"/images/elkb/search1.png",alt:""}}),n("br")]),s._v(" "),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[s._v("目前为止，单节点的elasticsearch安装完毕。")])])}),[],!1,null,null,null);a.default=e.exports}}]);