(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{412:function(s,a,n){"use strict";n.r(a);var e=n(42),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"部署dashboard"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署dashboard"}},[s._v("#")]),s._v(" 部署Dashboard")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"翻墙安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#翻墙安装"}},[s._v("#")]),s._v(" 翻墙安装")]),s._v(" "),n("p",[s._v("如果你能流畅访问外网，你可以直接执行下面的命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"非翻墙安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非翻墙安装"}},[s._v("#")]),s._v(" 非翻墙安装")]),s._v(" "),n("h3",{attrs:{id:"下载kubernetes-dashboard-yaml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载kubernetes-dashboard-yaml"}},[s._v("#")]),s._v(" 下载kubernetes-dashboard.yaml")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ wget https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"修改kubernetes-dashboard-yaml参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改kubernetes-dashboard-yaml参数"}},[s._v("#")]),s._v(" 修改kubernetes-dashboard.yaml参数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ vi kubernetes-dashboard.yaml\n\n# ------------------- Dashboard Deployment ------------------- #\n        # 更换地址\n        image: lizhenliang/kubernetes-dashboard-amd64:v1.10.1\n        \n# ------------------- Dashboard Service ------------------- #\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kube-system\nspec:\n  # 暴露方式nodeport\n  type: NodePort\n  ports:\n    - port: 443\n      targetPort: 8443\n      # 暴露端口 30001\n      nodePort: 30001\n  selector:\n    k8s-app: kubernetes-dashboard\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"创建应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建应用"}},[s._v("#")]),s._v(" 创建应用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ kubectl apply -f kubernetes-dashboard.yaml\n\n# 当镜像下载完，部署就很快，查看pod\n[root@k8s-master ~]# kubectl get pods -n kube-system\nNAME                                 READY   STATUS    RESTARTS   AGE\ncoredns-bccdc95cf-6vzs9              1/1     Running   1          19h\ncoredns-bccdc95cf-jn7fg              1/1     Running   1          19h\netcd-k8s-master                      1/1     Running   1          19h\nkube-apiserver-k8s-master            1/1     Running   1          19h\nkube-controller-manager-k8s-master   1/1     Running   1          19h\nkube-flannel-ds-amd64-4gsdt          1/1     Running   1          18h\nkube-flannel-ds-amd64-7prn6          1/1     Running   1          18h\nkube-flannel-ds-amd64-r94rk          1/1     Running   1          18h\nkube-proxy-5bt7b                     1/1     Running   1          18h\nkube-proxy-dm7q9                     1/1     Running   1          18h\nkube-proxy-h6bwx                     1/1     Running   1          19h\nkube-scheduler-k8s-master            1/1     Running   1          19h\nkubernetes-dashboard-79ddd5-pmnd5    1/1     Running   0          2m36s\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"创建用户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建 名为：dashboard-admin 的serviceaccount\n[root@k8s-master ~]# kubectl create serviceaccount dashboard-admin -n kube-system\nserviceaccount/dashboard-admin created\n\n# 将dashboard-admin 绑定在 kube-system:dashboard-admin 权限组下\n# kube-system:dashboard-admin 中的dashboard-admin是一个权限组，拥有k8s的全部权限，相当于超级管理员\n[root@k8s-master ~]# kubectl create clusterrolebinding dashboard-admin --clusterrole=cluster-admin --serviceaccount=kube-system:dashboard-admin\nclusterrolebinding.rbac.authorization.k8s.io/dashboard-admin created\n\n# 拿到账号的权限认证的token\n[root@k8s-master ~]# kubectl describe secrets -n kube-system $(kubectl -n kube-system get secret | awk '/dashboard-admin/{print $1}')\nName:         dashboard-admin-token-c5n9f\nNamespace:    kube-system\nLabels:       <none>\nAnnotations:  kubernetes.io/service-account.name: dashboard-admin\n              kubernetes.io/service-account.uid: 9c33e332-b18b-44c6-932d-5a8db32457f2\n\nType:  kubernetes.io/service-account-token\n\nData\n====\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tYzVuOWYiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiOWMzM2UzMzItYjE4Yi00NGM2LTkzMmQtNWE4ZGIzMjQ1N2YyIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRhc2hib2FyZC1hZG1pbiJ9.UT8kXqUMThRKBiaJXTOU9IfRiUQaCyWbQ1VrG5PKF0W_BWmzeW9-Rw95Hq_r-9qqTkw6jelxLrGnuT4Qez5N704a90YWu3AfV5EMegX_ra5PN3LYf1t0_GfGt1S8AOSx14aSkkhkXwP75LQxrLMoTw_qqAaVFc6Ck-2t9gOUgEu3rb0nn8SRfe3TFJ71xUibUM0MZUO6QkOzW5mImDVbvQIImJCo075lW8_QwKchWQLh8Ka2Fg8y3ZIY3RDm3jtTIkPBy4NYy3yv96ijWCEsHdKgNbgl1i6xJqipRpo218sSSA_PWVCAbtAxGz-QdVkLP1_Vuf4Nf-S9NhWPKqSURg\nca.crt:     1025 bytes\nnamespace:  11 bytes\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"浏览器访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器访问"}},[s._v("#")]),s._v(" 浏览器访问")]),s._v(" "),n("p",[s._v("在chrome上访问https://192.168.163.109:30001，我这边访问不了。"),n("br"),s._v("\n建议在火狐浏览器上访问，选择高级，接受为可信任网站。因为这个站点的证书，浏览器不认可。\n"),n("img",{attrs:{src:"/images/k8s/k8s3.png",alt:""}}),n("br")]),s._v(" "),n("h3",{attrs:{id:"token登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#token登录"}},[s._v("#")]),s._v(" token登录")]),s._v(" "),n("p",[s._v("使用上面获得的token登录\n"),n("img",{attrs:{src:"/images/k8s/k8s4.png",alt:""}}),n("br")])])}),[],!1,null,null,null);a.default=t.exports}}]);